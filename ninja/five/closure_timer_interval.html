<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title></title>
  <script src="../assertion.js" type="text/javascript"></script>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body style="position: relative;">
<ul id="results"></ul>
<div id="box" style="background-color: #00B7FF; width: 200px; height: 200px; position: absolute;">ボックス</div>
<div style="position: relative; margin-top: 100px;">
  <div id="box2" style="background-color: #b30000; width: 200px; height: 200px; position: absolute;margin-top: 300px;">ボックス2</div>
</div>
<script>
  function animateIt(elementId) {
    var element = document.getElementById(elementId);
    var tick = 0;

    var timer = setInterval(function() {
      if (tick < 100) {
        element.style.left = element.style.top = tick + 'px';
        tick += 1;
      }
      else {
        clearInterval(timer);
        assert(tick === 100, "Tick accessed via a closure.");
        assert(element, "Element also accessed via a closure.");
        assert(timer, "Timer reference also accessed via a closure.");
      }
    }, 10);
  }

  animateIt('box');
  animateIt('box2');

</script>
</body>
</html>

