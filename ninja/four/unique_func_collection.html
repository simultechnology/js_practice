<!DOCTYPE html>
<html>
<head>
  <title></title>
  <script src="../assertion.js" type="text/javascript"></script>
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
<ul id="results"></ul>
<script>

  var store = {
    nextId: 1,

    cache: {},

    add: function(fn) {
      if (!fn.id) {
        console.log(this);
        fn.id = this.nextId++;
        return !!(this.cache[fn.id] = fn);
      }
    }
  };

  function ninja() {};

  assert(store.add(ninja), "Function was safely added.");
  assert(!store.add(ninja), "But it was only added once.");

</script>
</body>
</html>
